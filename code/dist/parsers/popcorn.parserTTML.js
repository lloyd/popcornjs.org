(function(m){m.parser("parseTTML",function(h){var i={title:"",remote:"",data:[]},f,n=0,j,g=function(d,e){if(!d)return-1;var b=d.split(":"),a=b.length-1;if(a>=2)return parseInt(b[0],10)*3600+parseInt(b[a-1],10)*60+parseFloat(b[a],10);for(b=d.length-1;b>=0;b--)if(d[b]<="9"&&d[b]>="0")break;b++;a=d.substr(b);e=e||0;if(a==="h")a=3600;else if(a==="m")a=60;else if(a==="s")a=1;else if(a==="ms")a=0.0010;else return-1;return parseFloat(d.substr(0,b))*a+e},o=function(d,e){var b={};b[d]=e;return b},l=function(d,
e){for(var b=d.firstChild,a;b;){if(b.nodeType===1)if(b.nodeName==="p"){a=b;var k=e,c={};c.text=a.textContent.replace(/^[\s]+|[\s]+$/gm,"").replace(/(?:\r\n|\r|\n)/gm,"<br />");c.id=a.getAttribute("xml:id");c.start=g(a.getAttribute("begin"),k);c.end=g(a.getAttribute("end"),k);c.target=j;if(c.end<0){c.end=g(a.getAttribute("duration"),0);if(c.end>=0)c.end+=c.start;else c.end=Number.MAX_VALUE}a=c;i.data.push(o("subtitle",a));n++}else if(b.nodeName==="div"){a=g(b.getAttribute("begin"));if(a<0)a=e;l(b,
a)}b=b.nextSibling}};if(!h.xml||!h.xml.documentElement||!(f=h.xml.documentElement.firstChild))return i;for(;f.nodeName!=="body";)f=f.nextSibling;j="";l(f,0);return i})})(Popcorn);
