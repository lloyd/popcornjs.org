(function(n){n.parser("parseSRT",function(d){var k={title:"",remote:"",data:[]},l=[],b=0,g=0,h=0,e,i,a,m=function(c){c=c.split(":");try{var f=c[2].split(",");if(f.length===1)f=c[2].split(".");return parseFloat(c[0],10)*3600+parseFloat(c[1],10)*60+parseFloat(f[0],10)+parseFloat(f[1],10)/1E3}catch(j){return 0}},o=function(c,f){var j={};j[c]=f;return j};d=d.text.split(/(?:\r\n|\r|\n)/gm);g=d.length;for(b=0;b<g;b++){a={};i=[];a.id=parseInt(d[b++],10);e=d[b++].split(/[\t ]*--\>[\t ]*/);a.start=m(e[0]);
h=e[1].indexOf(" ");if(h!==-1)e[1]=e[1].substr(0,h);for(a.end=m(e[1]);b<g&&d[b];)i.push(d[b++]);a.text=i.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");a.text=a.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");a.text=a.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");a.text=a.text.replace(/\\N/gi,"<br />");l.push(o("subtitle",a))}k.data=l;return k})})(Popcorn);
