(function(d){d.plugin("processing",function(a){var g=function(b){var c,e;window.Processing||d.getScript("http://processingjs.org/content/download/processing-js-1.2.1/processing-1.2.1.min.js");a.parentTarget=document.getElementById(a.target);if(!a.parentTarget&&d.plugin.debug)throw Error("target container doesn't exist");c=function(){var f=function(){b.listen("pause",function(){a.canvas.style.display==="inline"&&a.pjsInstance.noLoop()});b.listen("play",function(){a.canvas.style.display==="inline"&&
a.pjsInstance.loop()})};if(window.Processing){a.pjsInstance=new Processing(a.canvas,a.processingCode);a.pjsInstance.noLoop();a.seeking=false;b.listen("seeking",function(){a._running&&a.canvas.style.display==="inline"&&a.noPause&&a.pjsInstance.loop()});a._running&&!b.media.paused&&a.pjsInstance.loop();a.noPause=a.noPause||false;!a.noPause&&f();a.codeReady=true}else setTimeout(function(){c.call(this)},10)};e=document.createElement("canvas");e.id=d.guid(a.target+"-sketch-");e["data-processing-sources"]=
a.sketch;e.style.display="none";a.canvas=e;a.parentTarget&&a.parentTarget.appendChild(a.canvas);if(a.sketch)d.xhr({url:a.sketch,dataType:"text",success:function(f){a.codeReady=true;a.processingCode=f;c()}});else if(d.plugin.debug)throw Error("options.sketch is undefined");};return{_setup:function(b){b.codeReady=false;g(this)},start:function(b,c){c.codeReady&&!this.media.paused&&c.pjsInstance.loop();c.canvas.style.display="inline"},end:function(b,c){c.pjsInstance&&c.pjsInstance.noLoop();c.canvas.style.display=
"none"},_teardown:function(b){b.pjsInstance&&b.pjsInstance.exit();b.parentTarget&&b.parentTarget.removeChild(b.canvas)}}},{about:{name:"Popcorn Processing Plugin",version:"0.1",author:"Christopher De Cairos, Benjamin Chalovich",website:"cadecairos.blogspot.com, ben1amin.wordpress.org"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:{elem:"input",type:"text",label:"Target"},sketch:{elem:"input",type:"text",label:"Sketch"},noPause:{elem:"select",
options:["TRUE","FALSE"],label:"No Loop"}}})})(Popcorn);
