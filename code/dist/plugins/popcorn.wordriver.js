(function(k){var c={},f=0,g=document.createElement("span"),l=["webkit","Moz","ms","O",""],h=["Transform","TransitionDuration","TransitionTimingFunction"],d={},i;document.getElementsByTagName("head")[0].appendChild(g);for(var e=0,n=h.length;e<n;e++)for(var j=0,o=l.length;j<o;j++){i=l[j]+h[e];if(i in g.style){d[h[e].toLowerCase()]=i;break}}document.getElementsByTagName("head")[0].appendChild(g);k.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"text",
label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text"},color:{elem:"input",type:"text",label:"Color"}}},_setup:function(a){if(!document.getElementById(a.target)&&k.plugin.debug)throw Error("target container doesn't exist");a._duration=a.end-a.start;var b;if(!(b=c[a.target])){b=a.target;c[b]=document.createElement("div");var m=document.getElementById(b);m&&m.appendChild(c[b]);c[b].style.height="100%";c[b].style.position="relative";
b=c[b]}a._container=b;a.word=document.createElement("span");a.word.style.position="absolute";a.word.style.whiteSpace="nowrap";a.word.style.opacity=0;a.word.style.MozTransitionProperty="opacity, -moz-transform";a.word.style.webkitTransitionProperty="opacity, -webkit-transform";a.word.style.OTransitionProperty="opacity, -o-transform";a.word.style.transitionProperty="opacity, transform";a.word.style[d.transitionduration]="1s, "+a._duration+"s";a.word.style[d.transitiontimingfunction]="linear";a.word.innerHTML=
a.text;a.word.style.color=a.color||"black"},start:function(a,b){b._container.appendChild(b.word);b.word.style[d.transform]="";b.word.style.fontSize=~~(30+20*Math.random())+"px";f%=b._container.offsetWidth-b.word.offsetWidth;b.word.style.left=f+"px";f+=b.word.offsetWidth+10;b.word.style[d.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)";b.word.style.opacity=1;setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1E3)},end:function(a,b){b.word.style.opacity=
0},_teardown:function(a){var b=document.getElementById(a.target);a.word.parentNode&&a._container.removeChild(a.word);c[a.target]&&!c[a.target].childElementCount&&b&&b.removeChild(c[a.target])&&delete c[a.target]}})})(Popcorn);
