(function(d){var h=0,i=function(a){var b=a.container=document.createElement("div"),c=b.style,e=a.media,g=function(){var f=a.position();c.fontSize="18px";c.width=e.offsetWidth+"px";c.top=f.top+e.offsetHeight-b.offsetHeight-40+"px";c.left=f.left+"px";setTimeout(g,10)};b.id=d.guid();c.position="absolute";c.color="white";c.textShadow="black 2px 2px 6px";c.fontWeight="bold";c.textAlign="center";g();a.media.parentNode.appendChild(b)};d.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var b=document.createElement("div");b.id="subtitle-"+h++;b.style.display="none";!this.container&&(!a.target||a.target==="subtitle-container")&&i(this);a.container=a.target&&a.target!=="subtitle-container"?document.getElementById(a.target):
this.container;document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(b);a.innerContainer=b;a.showSubtitle=function(){a.innerContainer.innerHTML=a.text}},start:function(a,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})})(Popcorn);
