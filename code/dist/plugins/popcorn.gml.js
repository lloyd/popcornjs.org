(function(k){var A=function(a){var b=0,c=0,h=0,e=null,l=null,t=false,g=0,u=function(){},v=function(){a.background(0);c=h=0;e=l=null};a.draw=function(){u()};a.setup=function(){};a.construct=function(w,s,m){var y=function(){if(s){g=s.gml.tag.drawing.stroke;var z=(m.end-m.start)/(g.pt||function(i){for(var d=[],j=0,n=i.length;j<n;j++)d=d.concat(i[j].pt);return d}(g)).length,f=s.gml.tag;f=f.header&&f.header.client&&f.header.client.name;t=f==="Graffiti Analysis 2.0: DustTag"||f==="DustTag: Graffiti Analysis 2.0"||
f==="Fat Tag - Katsu Edition";u=function(){if(w.currentTime<m.endDrawing){var i=(w.currentTime-m.start)/z;for(i<c&&v();c<=i;){if(!g)break;b=g[h]||g;var d=b.pt[c],j=c;if(e!=null){var n=d.x,x=d.y,o=void 0,p=void 0,q=void 0,r=void 0;if(t){o=l*a.height;p=a.width-e*a.width;q=x*a.height;r=a.width-n*a.width}else{o=e*a.width;p=l*a.height;q=n*a.width;r=x*a.height}a.stroke(0);a.strokeWeight(13);a.strokeCap(a.SQUARE);a.line(o,p,q,r);a.stroke(255);a.strokeWeight(12);a.strokeCap(a.ROUND);a.line(o,p,q,r)}e=d.x;
l=d.y;c===j&&c++}}}}else setTimeout(y,5)};a.size(640,640);a.frameRate(60);a.smooth();v();a.noLoop();y()}};k.plugin("gml",{_setup:function(a){var b=this,c=document.getElementById(a.target);a.endDrawing=a.endDrawing||a.end;a.container=document.createElement("canvas");a.container.style.display="none";a.container.setAttribute("id","canvas"+a.gmltag);if(!c&&k.plugin.debug)throw Error("target container doesn't exist");c&&c.appendChild(a.container);window.Processing||k.getScript("http://processingjs.org/content/download/processing-js-1.2.1/processing-1.2.1.min.js");
var h=function(){window.Processing?k.getJSONP("http://000000book.com/data/"+a.gmltag+".json?callback=",function(e){a.pjsInstance=new Processing(a.container,A);a.pjsInstance.construct(b.media,e,a);a._running&&a.pjsInstance.loop()},false):setTimeout(h,5)};h()},start:function(a,b){b.pjsInstance&&b.pjsInstance.loop();b.container.style.display="block"},end:function(a,b){b.pjsInstance&&b.pjsInstance.noLoop();b.container.style.display="none"},_teardown:function(a){a.pjsInstance&&a.pjsInstance.exit();document.getElementById(a.target)&&
document.getElementById(a.target).removeChild(a.container)}})})(Popcorn);
