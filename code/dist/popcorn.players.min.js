(function(h,l){Popcorn.baseplayer=function(){return new Popcorn.baseplayer.init};Popcorn.baseplayer.init=function(){this.currentTime=this.readyState=0;this.baselineTime=new Date;this.duration=0;this.paused=1;this.ended=0;this.volume=1;this.muted=0;this.playbackRate=1;this.loop=this.autoplay=null;this._events={};this._container=this._resource=null;this.offsetTop=this.offsetLeft=this.offsetHeight=this.height=this.offsetWidth=this.width=0;this.offsetParent=null};Popcorn.baseplayer.init.prototype={load:function(){},
play:function(){this.paused=0;this.timeupdate()},pause:function(){this.paused=1},timeupdate:function(){var m=this;if(!this.paused){this.currentTime+=(new Date-this.baselineTime)/1E3;this.dispatchEvent("timeupdate")}this.baselineTime=new Date;setTimeout(function(){m.timeupdate.call(m)},50)},getBoundingClientRect:function(){return Popcorn.position(this._resource||this._container)},addEventListener:function(m,p){this._events[m]||(this._events[m]=[]);this._events[m].push(p);return p},dispatchEvent:function(m){var p,
f=this,j=m.type;if(!j){j=m;if(m=Popcorn.events.getInterface(j)){p=document.createEvent(m);p.initEvent(j,true,true,window,1)}}Popcorn.forEach(this._events[j],function(k){k.call(f,p,f)})},extractContainerValues:function(m){if(this._container=document.getElementById(m)){m=this._container.getBoundingClientRect();this.offsetWidth=this.width=this.getStyle("width")||0;this.offsetHeight=this.height=this.getStyle("height")||0;this.offsetLeft=m.left;this.offsetTop=m.top;this.offsetParent=this._container.offsetParent;
return this._container}},getStyle:function(m){var p=this._resource||this._container;return p.currentStyle?p.currentStyle[m]:h.getComputedStyle?l.defaultView.getComputedStyle(p,null).getPropertyValue(m):p.style[m]}}})(window,document);(function(h,l){var m=h.document,p=h.location,f=/:\/\//,j=p.href.replace(p.href.split("/").slice(-1)[0],""),k=function(c,b,a){c=c||0;b=(b||c||0)+1;a=a||1;b=Math.ceil((b-c)/a)||0;var e=0,d=[];for(d.length=b;e<b;){d[e++]=c;c+=a}return d};l.sequence=function(c,b){return new l.sequence.init(c,b)};l.sequence.init=function(c,b){this.parent=m.getElementById(c);this.seqId=l.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var a=this,e=0;l.forEach(b,function(d,g){var n=m.createElement("video");n.preload="auto";n.controls=true;n.style.display=g&&"none"||"";n.id=a.seqId+"-"+g;a.queue.push(n);var o=d["in"],q=d.out;a.inOuts.ofVideos.push({"in":o!==undefined&&o||1,out:q!==undefined&&q||0});a.inOuts.ofVideos[g].out=a.inOuts.ofVideos[g].out||a.inOuts.ofVideos[g]["in"]+2;n.src=!f.test(d.src)?j+d.src:d.src;n.setAttribute("data-sequence-owner",c);n.setAttribute("data-sequence-guid",
a.seqId);n.setAttribute("data-sequence-id",g);n.setAttribute("data-sequence-clip",[a.inOuts.ofVideos[g]["in"],a.inOuts.ofVideos[g].out].join(":"));a.parent.appendChild(n);a.playlist.push(l("#"+n.id))});a.inOuts.ofVideos.forEach(function(d){d={"in":e,out:e+(d.out-d["in"])};a.inOuts.ofClips.push(d);e=d.out+1});l.forEach(this.queue,function(d,g){function n(){if(!g){a.dims.width=d.videoWidth;a.dims.height=d.videoHeight}d.currentTime=a.inOuts.ofVideos[g]["in"]-0.5;d.removeEventListener("canplaythrough",
n,false);return true}d.addEventListener("canplaythrough",n,false);d.addEventListener("play",function(){a.playing=true},false);d.addEventListener("pause",function(){a.playing=false},false);d.addEventListener("timeupdate",function(o){o=o.srcElement||o.target;o=+(o.dataset&&o.dataset.sequenceId||o.getAttribute("data-sequence-id"));var q=Math.floor(d.currentTime);if(a.times.last!==q&&o===a.active){a.times.last=q;q===a.inOuts.ofVideos[o].out&&l.sequence.cycle.call(a,o)}},false)});return this};l.sequence.init.prototype=
l.sequence.prototype;l.sequence.cycle=function(c){this.queue||l.error("Popcorn.sequence.cycle is not a public method");var b=this.queue,a=this.inOuts.ofVideos,e=b[c],d=0,g;if(b[c+1])d=c+1;if(b[c+1]){b=b[d];a=a[d];l.extend(b,{width:this.dims.width,height:this.dims.height});g=this.playlist[d];e.pause();this.active=d;this.times.last=a["in"]-1;g.currentTime(a["in"]);g[d?"play":"pause"]();this.trigger("cycle",{position:{previous:c,current:d}});if(d){e.style.display="none";b.style.display=""}this.cycling=
false}else this.playlist[c].pause();return this};var i=["timeupdate","play","pause"];l.extend(l.sequence.prototype,{eq:function(c){return this.playlist[c]},remove:function(){this.parent.innerHTML=null},clip:function(c){return this.inOuts.ofVideos[c]},duration:function(){for(var c=0,b=this.inOuts.ofClips,a=0;a<b.length;a++)c+=b[a].out-b[a]["in"]+1;return c-1},play:function(){this.playlist[this.active].play();return this},exec:function(c,b){var a=this.active;this.inOuts.ofClips.forEach(function(e,d){if(c>=
e["in"]&&c<=e.out)a=d});c+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"];l.addTrackEvent(this.playlist[a],{start:c-1,end:c,_running:false,_natives:{start:b||l.nop,end:l.nop,type:"exec"}});return this},listen:function(c,b){var a=this,e=this.playlist,d=e.length,g=0;if(!b)b=l.nop;if(l.Events.Natives.indexOf(c)>-1)l.forEach(e,function(n){n.listen(c,function(o){o.active=a;if(i.indexOf(c)>-1)b.call(n,o);else++g===d&&b.call(n,o)})});else{this.events[c]||(this.events[c]={});e=b.name||l.guid("__"+
c);this.events[c][e]=b}return this},unlisten:function(){},trigger:function(c,b){var a=this;if(!(l.Events.Natives.indexOf(c)>-1)){this.events[c]&&l.forEach(this.events[c],function(e){e.call(a,{type:c},b)});return this}}});l.forEach(l.manifest,function(c,b){l.sequence.prototype[b]=function(a){var e={},d=[],g,n,o,q,r;for(g=0;g<this.inOuts.ofClips.length;g++){d=this.inOuts.ofClips[g];n=k(d["in"],d.out);o=n.indexOf(a.start);q=n.indexOf(a.end);if(o>-1)e[g]=l.extend({},d,{start:n[o],clipIdx:o});if(q>-1)e[g]=
l.extend({},d,{end:n[q],clipIdx:q})}g=Object.keys(e).map(function(t){return+t});d=k(g[0],g[1]);for(g=0;g<d.length;g++){o={};q=d[g];var s=e[q];if(s){r=this.inOuts.ofVideos[q];n=s.clipIdx;r=k(r["in"],r.out);if(s.start){o.start=r[n];o.end=r[r.length-1]}if(s.end){o.start=r[0];o.end=r[n]}}else{o.start=this.inOuts.ofVideos[q]["in"];o.end=this.inOuts.ofVideos[q].out}this.playlist[q][b](l.extend({},a,o))}return this}})})(this,Popcorn);(function(h,l){function m(b,a){if(b.currentStyle)return b.currentStyle[a];else if(l.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}function p(b){return'<div><a href="'+b.user.profile+'"><img width="16px height="16px" src="'+b.user.avatar+'"></img>'+b.user.name+"</a> at "+function(a){var e=k(a/60);a=i(a%60);return e+"."+(a<10?"0":"")+a}(b.start)+" "+function(a){function e(d,g){return d+" "+g+(d>1?"s":"")+" ago"}a=((new Date).getTime()-a.getTime())/1E3;if(a<
60)return e(i(a),"second");a/=60;if(a<60)return e(i(a),"minute");a/=60;if(a<24)return e(i(a),"hour");a/=24;if(a<30)return e(i(a),"day");if(a<365)return e(i(a/30),"month");return e(i(a/365),"year")}(b.date)+"<br />"+b.text+"</span>"}function f(b){if(l.swfobject&&l.soundcloud){var a={enable_api:true,object_id:b._playerId,url:b.src,show_comments:!b._options.api.key&&!b._options.api.commentdiv},e={id:b._playerId,name:b._playerId},d=document.createElement("div");d.setAttribute("id",b._playerId);b._container.appendChild(d);
swfobject.embedSWF("http://player.soundcloud.com/player.swf",b._playerId,b.offsetWidth,b.height,"9.0.0","expressInstall.swf",a,{allowscriptaccess:"always",wmode:"transparent"},e)}else setTimeout(function(){f(b)},15)}var j=Math.abs,k=Math.floor,i=Math.round,c={};h.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");h.getScript("http://popcornjs.org/code/players/soundcloud/lib/soundcloud.player.api.js",function(){var b=1;soundcloud.addEventListener("onPlayerReady",function(a,
e){var d=c[a.api_getFlashId()];d.swfObj=a;d.duration=a.api_getTrackDuration();d.currentTime=a.api_getTrackPosition();d.volume=d.previousVolume=a.api_getVolume()/100;d._mediaId=e.mediaId;d.dispatchEvent("load");d.dispatchEvent("canplay");d.dispatchEvent("durationchange");d.timeupdate()});soundcloud.addEventListener("onMediaStart",function(a){a=c[a.api_getFlashId()];a.played=1;a.dispatchEvent("playing")});soundcloud.addEventListener("onMediaPlay",function(a){if(b)b=0;else c[a.api_getFlashId()].dispatchEvent("play")});
soundcloud.addEventListener("onMediaPause",function(a){c[a.api_getFlashId()].dispatchEvent("pause")});soundcloud.addEventListener("onMediaBuffering",function(a){a=c[a.api_getFlashId()];a.dispatchEvent("progress");if(a.readyState===0){a.readyState=3;a.dispatchEvent("readystatechange")}});soundcloud.addEventListener("onMediaDoneBuffering",function(a){c[a.api_getFlashId()].dispatchEvent("canplaythrough")});soundcloud.addEventListener("onMediaEnd",function(a){a=c[a.api_getFlashId()];a.paused=1;a.dispatchEvent("ended")});
soundcloud.addEventListener("onMediaSeek",function(a){var e=c[a.api_getFlashId()];e.setCurrentTime(a.api_getTrackPosition());e.paused&&e.dispatchEvent("timeupdate")});soundcloud.addEventListener("onPlayerError",function(a){c[a.api_getFlashId()].dispatchEvent("error")})});h.soundcloud=function(b,a,e){return new h.soundcloud.init(b,a,e)};h.soundcloud.init=function(){function b(a){var e=a._options,d=a._container,g=d.getBoundingClientRect();a.width=e.width||m(d,"width")||"100%";a.height=e.height||m(d,
"height")||"81px";a.src=e.src;a.autoplay=e.autoplay;if(parseFloat(a.height,10)!==81)a.height="81px";a.offsetLeft=g.left;a.offsetTop=g.top;a.offsetHeight=parseFloat(a.height,10);a.offsetWidth=parseFloat(a.width,10);if(/[\d]+%/.test(a.width)){e=m(d,"width");a._container.style.width=a.width;a.offsetWidth=a._container.offsetWidth;a._container.style.width=e}if(/[\d]+%/.test(a.height)){e=m(d,"height");a._container.style.height=a.height;a.offsetHeight=a._container.offsetHeight;a._container.style.height=
e}}return function(a,e,d){if(a)if(e){if(/file/.test(location.protocol))throw"Must run from a web server!";}else throw"Must supply a source!";else throw"Must supply an id!";if(!(this._container=document.getElementById(a)))throw"Could not find that container in the DOM!";d=d||{};d.api=d.api||{};d.target=a;d.src=e;d.api.commentformat=d.api.commentformat||p;this._mediaId=0;this._listeners={};this._playerId=h.guid(d.target);this._containerId=d.target;this._options=d;this._comments=[];this._popcorn=null;
b(this);this.duration=0;this.volume=1;this.ended=this.currentTime=0;this.paused=1;this.readyState=0;this.playbackRate=1;this.left=this.top=0;this.autoplay=null;this.played=0;this.addEventListener("load",function(){var g=this.getBoundingClientRect();this.top=g.top;this.left=g.left;this.offsetWidth=this.swfObj.offsetWidth;this.offsetHeight=this.swfObj.offsetHeight;this.offsetLeft=this.swfObj.offsetLeft;this.offsetTop=this.swfObj.offsetTop});c[this._playerId]=this;f(this)}}();h.soundcloud.init.prototype=
h.soundcloud.prototype;h.extend(h.soundcloud.prototype,{setVolume:function(b){if(!(!b&&b!==0)){if(b<0)b=-b;if(b>1)b%=1;this.volume=this.previousVolume=b;this.swfObj.api_setVolume(b*100);this.dispatchEvent("volumechange")}},setCurrentTime:function(b){if(!(!b&&b!==0)){this.currentTime=this.previousCurrentTime=b;this.ended=b>=this.duration;this.dispatchEvent("seeked")}},play:function(){if(this.swfObj){if(this.paused){this.paused=0;this.swfObj.api_play()}}else this.addEventListener("load",this.play)},
pause:function(){if(this.swfObj){if(!this.paused){this.paused=1;this.swfObj.api_pause()}}else this.addEventListener("load",this.pause)},mute:function(){if(this.swfObj)if(this.muted())if(this.paused)this.setVolume(this.oldVol);else this.volume=this.oldVol;else{this.oldVol=this.volume;if(this.paused)this.setVolume(0);else this.volume=0}else this.addEventListener("load",this.mute)},muted:function(){return this.volume===0},load:function(){if(this.swfObj){this.play();this.pause()}else this.addEventListener("load",
this.load)},addEventListener:function(b,a){this._listeners[b]||(this._listeners[b]=[]);this._listeners[b].push(a);return a},dispatchEvent:function(b){var a=this;b=b.type||b;b==="play"&&this.paused||b==="pause"&&!this.paused?this[b]():h.forEach(this._listeners[b],function(e){e.call(a)})},timeupdate:function(){var b=this,a=this.swfObj.api_getVolume()/100;if(j(this.currentTime-this.previousCurrentTime)>0.25)this.swfObj.api_seekTo(this.currentTime);else this.previousCurrentTime=this.currentTime=this.swfObj.api_getTrackPosition();
if(a!==this.previousVolume)this.setVolume(a);else this.volume!==this.previousVolume&&this.setVolume(this.volume);this.paused||this.dispatchEvent("timeupdate");b.ended||setTimeout(function(){b.timeupdate.call(b)},33)},getBoundingClientRect:function(){var b;if(this.swfObj){b=this.swfObj.getBoundingClientRect();return{bottom:b.bottom,left:b.left,right:b.right,top:b.top,width:b.width||b.right-b.left,height:b.height||b.bottom-b.top}}else{tmp=this._container.getBoundingClientRect();return{left:tmp.left,
top:tmp.top,width:this.offsetWidth,height:this.offsetHeight,bottom:tmp.top+this.width,right:tmp.top+this.height}}},registerPopcornWithPlayer:function(b){if(this.swfObj){this._popcorn=b;var a=this._options.api;if(a.key&&a.commentdiv){var e=this;h.xhr({url:"http://api.soundcloud.com/tracks/"+e._mediaId+"/comments.js?consumer_key="+a.key,success:function(d){h.forEach(d.json,function(g){e.addComment({start:g.timestamp/1E3,date:new Date(g.created_at),text:g.body,user:{name:g.user.username,profile:g.user.permalink_url,
avatar:g.user.avatar_url}})})}})}}else this.addEventListener("load",function(){this.registerPopcornWithPlayer(b)})}});h.extend(h.soundcloud.prototype,{addComment:function(b,a){var e=this,d={start:b.start||0,date:b.date||new Date,text:b.text||"",user:{name:b.user.name||"",profile:b.user.profile||"",avatar:b.user.avatar||""},display:function(){return(a||e._options.api.commentformat)(d)}};this._comments.push(d);this._popcorn&&this._popcorn.subtitle({start:d.start,target:this._options.api.commentdiv,
display:"inline",language:"en",text:d.display()})}})})(Popcorn,window);(function(h){var l=Math.abs,m={},p=function(f){function j(i){if(!k[i]){k[i]=[];this["on"+i]=function(c){h.forEach(k[i],function(b){b&&b.call(f,c)})}}}var k={};return{addEventListener:function(i,c,b){i=i.toLowerCase();j.call(this,i);k[i].push(c);b&&dispatchEvent(i);return c},addEventListeners:function(i,c){i=i.toLowerCase();j.call(this,i);k[i]=k[i].concat(c)},removeEventListener:function(i,c){var b=this.getEventListeners(i),a,e;a=0;for(e=b.length;a<e;a++)if(b[a]===c){e=b[a];b[a]=0;return e}},getEventListeners:function(i){return i?
k[i.toLowerCase()]||[]:k},dispatchEvent:function(i,c){i="on"+i.toString().toLowerCase();this[i]&&this[i](c)}}};h.vimeo=function(f,j,k){return new h.vimeo.init(f,j,k)};h.vimeo.onLoad=function(f){var j=m[f];j.swfObj=document.getElementById(f);j.offsetWidth=j.swfObj.offsetWidth;j.offsetHeight=j.swfObj.offsetHeight;j.offsetParent=j.swfObj.offsetParent;j.offsetLeft=j.swfObj.offsetLeft;j.offsetTop=j.swfObj.offsetTop;j.dispatchEvent("load")};h.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");
h.vimeo.init=function(){function f(b){if(b)return(b=b.match(i))?b[0].substr(30):""}function j(b){if(b)return(b=b.match(c))?b[0].substr(10):""}function k(b,a,e){window.swfobject?swfobject.embedSWF("http://vimeo.com/moogaloop.swf",e,b.offsetWidth,b.offsetHeight,"9.0.0","expressInstall.swf",{clip_id:a,show_portrait:1,show_byline:1,show_title:1,js_api:1,js_onLoad:"Popcorn.vimeo.onLoad",js_swf_id:e},{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"},{}):setTimeout(function(){k(b,a,
e)},1)}var i=/^http:\/\/player\.vimeo\.com\/video\/[\d]+/i,c=/vimeo\.com\/[\d]+/;return function(b,a,e){if(b){if(/file/.test(location.protocol))throw"Must run from a web server!";}else throw"Must supply an id!";var d=this;this._container=document.createElement("div");this._container.id=b+"object";this._target=document.getElementById(b);this._target.appendChild(this._container);e=e||{};e.css&&h.extend(this._target.style,e.css);this.evtHolder=this.addEventFn=null;this.paused=true;this.duration=Number.MAX_VALUE;
this.currentTime=this.ended=0;this.volume=1;this.readyState=this.played=this.initialTime=this.loop=0;this.parentNode=this._target.parentNode;this.previousCurrentTime=this.currentTime;this.previousVolume=this.volume;this.evtHolder=new p(this);this.width=this._target.style.width||"504px";this.height=this._target.style.height||"340px";if(/[\d]%/.test(this.width)){b=this._target.style.width;this._target.style.width=this.width;this.offsetWidth=this._target.offsetWidth;this._target.style.width=b}else{this.offsetWidth=
parseInt(this.width,10);this._target.style.width=this.width+"px"}if(/[\d]%/.test(this.height)){b=this._target.style.height;this._target.style.height=this.height;this.offsetHeight=this._target.offsetHeight;this._target.style.height=b}else{this.offsetHeight=parseInt(this.height,10);this._target.style.height=this.height+"px"}this.offsetTop=this.offsetLeft=0;a=j(a)||f(a);if(!a)throw"No video id";m[this._container.id]=this;k(this,a,this._container.id);this.addEventListener("load",function(){var g=false;
d.duration=d.swfObj.api_getDuration();d.evtHolder.dispatchEvent("durationchange");d.evtHolder.dispatchEvent("loadedmetadata");d.addEventListener("timeupdate",function(){d.currentTime=d.swfObj.api_getCurrentTime()});d.addEventListener("pause",function(){d.paused=true});d.addEventListener("playing",function(){d.paused=false;d.ended=0});d.addEventListener("ended",function(){if(d.loop!=="loop"){d.paused=true;d.ended=1}});d.addEventListener("progress",function(n){if(!g){g=1;d.readyState=3;d.evtHolder.dispatchEvent("readystatechange")}if(n.percent===
100){d.readyState=4;d.evtHolder.dispatchEvent("readystatechange");d.evtHolder.dispatchEvent("canplaythrough")}})})}}();h.vimeo.init.prototype=h.vimeo.prototype;h.extend(h.vimeo.prototype,{setLoop:function(f){if(f){this.loop=f;this.swfObj.api_setLoop(f==="loop"?1:0)}},setVolume:function(f){if(!(!f&&f!==0)){if(f<0)f=-f;if(f>1)f%=1;this.volume=this.previousVolume=f;this.swfObj.api_setVolume(f*100);this.evtHolder.dispatchEvent("volumechange")}},setCurrentTime:function(f){if(!(!f&&f!==0)){this.currentTime=
this.previousCurrentTime=f;this.ended=f>=this.duration;this.swfObj.api_seekTo(f);this.evtHolder.dispatchEvent("seeked");this.evtHolder.dispatchEvent("timeupdate")}},play:function(){if(this.swfObj){if(!this.played){this.played=1;this.startTimeUpdater();this.evtHolder.dispatchEvent("loadstart")}this.evtHolder.dispatchEvent("play");this.swfObj.api_play()}else this.addEventListener("load",this.play)},pause:function(){this.swfObj?this.swfObj.api_pause():this.addEventListener("load",this.pause)},mute:function(){if(this.swfObj)if(this.muted())if(this.paused)this.setVolume(this.oldVol);
else this.volume=this.oldVol;else{this.oldVol=this.volume;if(this.paused)this.setVolume(0);else this.volume=0}else this.addEventListener("load",this.mute)},muted:function(){return this.volume===0},load:function(){if(this.swfObj){this.play();this.pause()}else this.addEventListener("load",this.load)},unload:function(){if(this.swfObj){this.pause();this.swfObj.api_unload();this.evtHolder.dispatchEvent("abort");this.evtHolder.dispatchEvent("emptied")}else this.addEventListener("load",this.unload)},addEventListener:function(f,
j){var k;f=f.type||f.toLowerCase();if(f==="seeked")k="onSeek";else if(f==="timeupdate")k="onProgress";else if(f==="progress")k="onLoading";else if(f==="ended")k="onFinish";else if(f==="playing")k="onPlay";else if(f==="pause")k="on"+f[0].toUpperCase()+f.substr(1);this.evtHolder.addEventListener(f,j,false);if(k&&this.evtHolder.getEventListeners(f).length===1){h.vimeo[k]=k==="onSeek"||k==="onProgress"||k==="onLoading"?function(i,c){m[c].evtHolder.dispatchEvent(f,i)}:function(i){m[i].evtHolder.dispatchEvent(f)};
this.swfObj.api_addEventListener(k,"Popcorn.vimeo."+k)}},removeEventListener:function(f,j){return this.evtHolder.removeEventListener(f,j)},dispatchEvent:function(f){return this.evtHolder.dispatchEvent(f)},getBoundingClientRect:function(){return this._target.getBoundingClientRect()},startTimeUpdater:function(){var f=this,j=0;if(l(this.currentTime-this.previousCurrentTime)>0.75){this.setCurrentTime(this.currentTime);j=1}else this.previousCurrentTime=this.currentTime;this.volume!==this.previousVolume&&
this.setVolume(this.volume);if(!f.paused||j)this.dispatchEvent("timeupdate");f.ended||setTimeout(function(){f.startTimeUpdater.call(f)},33)}})})(Popcorn,window);var onYouTubePlayerReady;
(function(h){function l(c){if(c)return(c=f.exec(c))?c[1]:""}function m(c){if(c)return(c=f.exec(c))?c[1]:""}function p(c,b){var a,e=this;if(window.swfobject){a=b.getBoundingClientRect();this.width=b.style.width||460;this.height=b.style.height||350;this.width=parseFloat(this.width);this.height=parseFloat(this.height);this.offsetWidth=this.width;this.offsetHeight=this.height;this.offsetLeft=a.left;this.offsetTop=a.top;this.offsetParent=b.offsetParent;a={playerapiid:this.playerId,controls:this.controls,
iv_load_policy:this.iv_load_policy};swfobject.embedSWF("http://www.youtube.com/e/"+this.vidId+"?enablejsapi=1&playerapiid="+this.playerId+"&version=3",this.playerId,this.width,this.height,"8",null,a,{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"},{id:this.playerId})}else setTimeout(function(){p.call(e,c,b)},1)}var f=/^.*[\/=](.{11})/,j={},k={},i=Math.abs;h.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");onYouTubePlayerReady=function(c){var b=j[c];
k[c]=1;b.video=document.getElementById(c);b.duration=b.video.getDuration();b.dispatchEvent("load");b.dispatchEvent("durationchange")};h.youtube=function(c,b,a){return new h.youtube.init(c,b,a)};h.youtube.init=function(c,b,a){if(c){if(/file/.test(location.protocol))throw"This must be run from a web server.";}else throw"Element id is invalid.";a=a||{};var e=this;this.playerId=c+h.guid();this.readyState=0;this._eventListeners={};this.paused=this.fullyLoaded=this.loadedData=this.loadStarted=false;a.width=
a.width&&+a.width+"px";a.height=a.height&&+a.height+"px";this.controls=+a.controls===0||+a.controls===1?a.controls:1;this.iv_load_policy=+a.annotations===1||+a.annotations===3?a.annotations:1;this._target=document.getElementById(c);this._container=document.createElement("div");this._container.id=this.playerId;this._container.style.height=this._target.style.height=a.height||this._target.style.height||"350px";this._container.style.width=this._target.style.width=a.width||this._target.style.width||"460px";
this._target.appendChild(this._container);this.parentNode=this._target.parentNode;this.offsetHeight=+this._target.offsetHeight;this.offsetWidth=+this._target.offsetWidth;this.currentTime=this.previousCurrentTime=0;this.volume=this.previousVolume=this.preMuteVol=1;this.duration=0;this.vidId=l(b)||m(b);if(!this.vidId)throw"Could not find video id";this.addEventListener("load",function(){this.offsetWidth=this.video.offsetWidth;this.offsetHeight=this.video.offsetHeight;this.offsetParent=this.video.offsetParent;
this.registerYoutubeEventHandlers();this.registerInternalEventHandlers()});(function(){var d=0;e.addEventListener("playing",function(){if(!d){d=1;e.duration=e.video.getDuration();e.dispatchEvent("durationchange")}})})();if(k[this.playerId]){this.video=j[this.playerId].video;this.vidId=this.vidId||l(this._container.getAttribute("src"))||m(this._container.getAttribute("src"));if(this.vidId!==j[this.playerId].vidId)this.video.cueVideoById(this.vidId);else this.previousCurrentTime=1;this.dispatchEvent("load")}else this._container?
p.call(this,b,this._container):document.addEventListener("DOMContentLoaded",function(){e._container=document.getElementById(c);if(!e._container)throw"Could not find container!";p.call(e,b,e._container)},false);j[this.playerId]=this};h.extend(h.youtube.init.prototype,{registerYoutubeEventHandlers:function(){var c=this;this.video.addEventListener("onStateChange","Popcorn.youtube.stateChangeEventHandler");this.video.addEventListener("onError","Popcorn.youtube.errorEventHandler");h.youtube.stateChangeEventHandler=
function(b){var a=j[c.playerId];if(b===-1){a.readyState=1;a.dispatchEvent("loadedmetadata")}else if(b===0)a.dispatchEvent("ended");else if(b===1){if(!this.loadedData){this.loadedData=true;a.dispatchEvent("loadeddata")}a.readyState=2;a.dispatchEvent("playing")}else if(b===2)a.dispatchEvent("pause");else if(b===3)a.dispatchEvent("waiting");else b===5&&h.nop()};h.youtube.errorEventHandler=function(){c.dispatchEvent("error")}},registerInternalEventHandlers:function(){this.addEventListener("playing",function(){this.startTimeUpdater()});
this.addEventListener("loadedmetadata",function(){this.startProgressUpdater()})},play:function(){if(k[this.playerId]){this.dispatchEvent("play");this.video.playVideo()}else this.addEventListener("load",function(){this.play()})},pause:function(){k[this.playerId]?this.video.pauseVideo():this.addEventListener("load",this.pause)},load:function(){if(k[this.playerId]){this.video.playVideo();this.video.pauseVideo()}else this.addEventListener("load",function(){this.load()})},seekTo:function(c){var b=this.video.getPlayerState()==
1;this.video.seekTo(c,true);if(b)this.video.paused=false;else{this.video.paused=true;this.video.pauseVideo()}if(!this.fullyLoaded)this.loadedData=false;this.dispatchEvent("seeked")},mute:function(){if(k[this.playerId])if(this.volume!==0){this.preMuteVol=this.volume;this.setVolume(0)}else this.setVolume(this.preMuteVol);else this.addEventListener("load",this.mute)},setVolume:function(c){this.volume=this.previousVolume=c;this.video.setVolume(c*100);this.dispatchEvent("volumechange")},addEventListener:function(c,
b){var a=c.type||c;this._eventListeners[a]||(this._eventListeners[a]=[]);this._eventListeners[a].push(b)},dispatchEvent:function(c){c=c.type||c;if(this._eventListeners[c]){var b=this;h.forEach(this._eventListeners[c],function(a){a.call(b,null)})}},defaultPlaybackRate:function(){},playbackRate:function(){},getBoundingClientRect:function(){var c;if(this.video){c=this.video.getBoundingClientRect();return{bottom:c.bottom,left:c.left,right:c.right,top:c.top,width:c.width||c.right-c.left,height:c.height||
c.bottom-c.top}}else{c=this._container.getBoundingClientRect();return{left:c.left,top:c.top,width:this._target.offsetWidth,height:this._target.offsetHeight,bottom:c.top+this._target.offsetWidth,right:c.left+this._target.offsetHeight}}},startTimeUpdater:function(){var c=typeof this.video.getPlayerState!="function"?this.readyState:this.video.getPlayerState(),b=this,a=0;if(i(this.currentTime-this.previousCurrentTime)>0.5){this.previousCurrentTime=this.currentTime-0.5;this.seekTo(this.currentTime);a=
1}else{this.previousCurrentTime=this.currentTime;this.currentTime=typeof this.video.getCurrentTime!="function"?this.currentTime:this.video.getCurrentTime()}this.volume!==this.previousVolume&&this.setVolume(this.volume);if(c!==0&&c!==2||a)this.dispatchEvent("timeupdate");c!==0&&setTimeout(function(){b.startTimeUpdater.call(b)},33)},startProgressUpdater:function(){var c=this.video.getVideoBytesLoaded(),b=this.video.getVideoBytesTotal(),a=this;if(b!==0){if(!this.loadStarted){this.loadStarted=true;this.dispatchEvent("loadstart")}if(c>=
b){this.fullyLoaded=true;this.readyState=4;this.dispatchEvent("canplaythrough")}else{this.dispatchEvent("progress");setTimeout(function(){a.startProgressUpdater.call(a)},250)}}}})})(Popcorn);
